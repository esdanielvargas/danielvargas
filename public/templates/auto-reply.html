<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
  <title>Preview: Auto-Reply</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&family=Google+Sans+Flex:opsz,wght@6..144,1..1000&family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&family=Space+Grotesk:wght@300..700&display=swap">
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #f5f5f5;
    }
  </style>
</head>

<body>

  <div class="no-print bg-neutral-100 border-b border-neutral-300 p-4 text-neutral-50">
    <div class="max-w-[600px] mx-auto flex flex-wrap items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <a href="./index.html" style="font-family: 'Space Grotesk', sans-serif;"
          class="min-h-9 flex items-center justify-center text-xs bg-neutral-950 px-4 py-2 rounded-lg font-medium hover:-rotate-2 active:scale-105 transition-all duration-300 ease-out">
          Volver atrás</a>
        <h1 style="font-family: 'Google Sans Flex', sans-serif;" class="font-bold text-base uppercase text-neutral-900">
          Auto-Reply</h1>
      </div>
      <div class="flex items-center gap-1">
        <button onclick="toggleForm()" style="font-family: 'Space Grotesk', sans-serif;"
          class="min-h-9 flex items-center justify-center text-xs bg-neutral-950 px-4 py-2 rounded-lg font-medium hover:-rotate-2 active:scale-105 transition-all duration-300 ease-out">
          Editar datos
        </button>
        <button onclick="downloadPNG()"
          class="min-w-9 min-h-9 text-xs bg-neutral-950 flex items-center justify-center rounded-lg font-medium hover:-rotate-2 active:scale-105 transition-all duration-300 ease-out">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 15V3" />
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <path d="m7 10 5 5 5-5" />
          </svg>
        </button>
      </div>
    </div>

    <div id="editor-form" class="max-w-4xl mx-auto mt-6 hidden text-black">
      <form id="param-form" style="font-family: 'Google Sans Flex', sans-serif;"
        class="max-w-[600px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-2.5 bg-white p-6 rounded-xl border border-neutral-200">
        <div class="col-span-2">
          <label class="block text-[10px] uppercase text-neutral-500 mb-1">Nombre del Cliente</label>
          <input name="name" type="text" placeholder="Ingrese su nombre completo"
            class="w-full bg-neutral-100 border border-neutral-200 rounded p-2 text-xs focus:border-sky-500 outline-none transition-all">
        </div>
        <button type="submit" style="font-family: 'Space Grotesk', sans-serif;"
          class="min-h-9 md:col-span-2 bg-neutral-950 text-neutral-50 font-bold py-2 rounded hover:bg-neutral-800 transition-all text-sm">
          Actualizar vista previa
        </button>
      </form>
    </div>
  </div>

  <div id="email-content"
    style="background-color: #f5f5f5; padding: 40px 10px; font-family: 'Google Sans Flex', system-ui, sans-serif;">
    <div
      style="max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 16px; overflow: hidden; border: 1px solid #e0e0e0; box-shadow: 0 4px 12px rgba(0,0,0,0.03);">

      <div style="width: 100%; padding: 20px 0; display: flex; background-color: #000000; color: #ffffff;">
        <a href="https://danielvargas.dev/?utm_source=auto-reply&utm_medium=email&utm_campaign=confirmation_contact&utm_id=001&utm_term=logotipo_header&utm_content=logotipo_blanco"
          target="_blank" rel="noopener noreferrer" style="margin: auto;">
          <img src="../images/logotype.png" alt="Logotipo de Daniel Vargas" title="Logotipo de Daniel Vargas"
            loading="eager" width="160" height="15" style="user-select: none; pointer-events: none;">
        </a>
      </div>

      <div style="padding: 20px 24px; color: #1a1a1a; line-height: 2; font-size: 13px;">
        <p style="margin-bottom: 8px;">Hola, <strong>{{name}}</strong>.</p>
        <p style="margin-bottom: 8px;">He recibido su mensaje correctamente. Le agradezco mucho el interés en mi trabajo
          y por compartirme los detalles sobre el proyecto.</p>
        <p style="margin-bottom: 8px;">Actualmente estoy revisando su propuesta. Me pondré en contacto con usted en un
          plazo de <strong>24 a 48
            horas</strong> laborales para que podamos conversar más a fondo sobre cómo darle vida a este proyecto.</p>
        <p style="margin-bottom: 8px;">Quedo a su entera disposición.</p>
        <div style="padding-top: 14px; margin-top: 14px; border-top: 1px solid #f0f0f0;">
          <p style="margin: 0; line-height: 2.5;">Saludos cordiales,</p>
          <p style="margin: 0; font-weight: 700; font-size: 14px; line-height: 1.5; color: #000;">
            Daniel Vargas
            <br>
            <span style="margin: 0; font-weight: 400; font-size: 12px; color: #666; margin-top: -10px;">Desarrollador
              Web & UI Designer.</span>
          </p>
        </div>
      </div>

      <div style="background-color: #fafafa; padding: 20px; text-align: left; border-top: 1px solid #f0f0f0;">
        <p style="margin: 0; font-size: 10px; color: #999; letter-spacing: 0.5px;">
          Este es un mensaje automático de confirmación. Una vez revisada su solicitud, le contactaré formalmente desde
          mi correo profesional para dar seguimiento a nuestro hilo de conversación.
        </p>
      </div>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const form = document.getElementById('editor-form');

    if (!params.has('name')) form.classList.remove('hidden');

    function toggleForm() { form.classList.toggle('hidden'); }

    const planKey = params.get('plan');
    const serviceKey = params.get('service');

    if (planKey && plans[planKey]) {
      interest = plans[planKey];
    } else if (serviceKey && services[serviceKey]) {
      interest = services[serviceKey];
    }

    const values = {
      name: params.get('name') || 'Cliente Especial',
      interest: params.get('interest') || 'Plan / Servicio'
    };

    let content = document.getElementById('email-content').innerHTML;

    content = content.replace(/{{name}}/, values.name);

    document.getElementById('email-content').innerHTML = content;

    document.getElementById('param-form').addEventListener('submit', (e) => {
      e.preventDefault();
      window.location.search = new URLSearchParams(new FormData(e.target)).toString();
    });

    function downloadPNG() {
      const target = document.getElementById('email-content');
      html2canvas(target, { backgroundColor: "#f5f5f5", scale: 2, useCORS: true }).then(canvas => {
        const link = document.createElement('a');
        link.download = `auto-reply-${values.name.toLowerCase().replace(/ /, "-")}.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }
  </script>
</body>

</html>